{
  "metadata": {
    "id": "Vidhin05.advanced-template",
    "name": "Vidhin's Regexes - Advanced",
    "description": "Advanced sorting for Anime, Movies, and TV Shows using regex patterns from [TRaSH Guides](https://trash-guides.info). Features Ranked Stream Expressions with intelligent scoring for release groups, quality filtering, repack detection, audio tags, visual tags and more. \n\n * Eliminates the need for audio/visual tags in your sort order \n * **ⓘ Requires Stream Expression Score in your sort order** (remove Regex Patterns and ranked regex scores) \n * Add `{stream.seScore}` to formatter to display scores and `{stream.rseMatched}` to display the matched stream expressions \n * Exceeds default expression limit - requires `MAX_STREAM_EXPRESSIONS=150`+ \n * ⚠️ See [README](https://github.com/Vidhin05/Releases-Regex#customizing-scores) for a guide on customizing scores (Dual Audio, Uncensored, etc.) \n * **Recommended for all**",
    "source": "external",
    "author": "Vidhin05",
    "version": "0.1.17",
    "category": "Regex",
    "services": [],
    "serviceRequired": false
  },
  "config": {
    "preferredRegexPatterns": [],
    "syncedPreferredRegexUrls": [],
    "syncedRankedRegexUrls": [
      "https://raw.githubusercontent.com/Vidhin05/Releases-Regex/main/merged-anime-regexes.json"
    ],
    "rankedStreamExpressions": [
      {
        "expression": "/*Remux T1*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T1') : []",
        "score": 1950
      },
      {
        "expression": "/*Remux T2*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T2') : []",
        "score": 1900
      },
      {
        "expression": "/*Remux T3*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T3') : []",
        "score": 1850
      },
      {
        "expression": "/*Bluray T1*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T1') : []",
        "score": 1800
      },
      {
        "expression": "/*Bluray T2*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T2') : []",
        "score": 1750
      },
      {
        "expression": "/*Bluray T3*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T3') : []",
        "score": 1700
      },
      {
        "expression": "/*Web T1*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T1') : []",
        "score": 1700
      },
      {
        "expression": "/*Web T2*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T2') : []",
        "score": 1650
      },
      {
        "expression": "/*Web T3*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T3') : []",
        "score": 1600
      },
      {
        "expression": "/*Web Scene*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web Scene') : []",
        "score": 1550
      },
      {
        "expression": "/*#SeaDex Best*/ isAnime ? seadex(streams, 'best') : []",
        "score": 2000
      },
      {
        "expression": "/*#SeaDex Alt*/ isAnime ? negate(seadex(streams, 'best'), seadex(streams)) : []",
        "score": 1750
      },
      {
        "expression": "/*Anime BD T1*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T1')) : []",
        "score": 1400
      },
      {
        "expression": "/*Anime BD T2*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T2')) : []",
        "score": 1300
      },
      {
        "expression": "/*Anime BD T3*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T3')) : []",
        "score": 1200
      },
      {
        "expression": "/*Anime BD T4*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T4')) : []",
        "score": 1100
      },
      {
        "expression": "/*Anime BD T5*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T5')) : []",
        "score": 1000
      },
      {
        "expression": "/*Anime BD T6*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T6')) : []",
        "score": 900
      },
      {
        "expression": "/*Remux T1 (Anime)*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Remux T1')) : []",
        "score": 975
      },
      {
        "expression": "/*Remux T2 (Anime)*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Remux T2')) : []",
        "score": 950
      },
      {
        "expression": "/*Remux T3 (Anime)*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Remux T3')) : []",
        "score": 925
      },
      {
        "expression": "/*Anime BD T7*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T7')) : []",
        "score": 800
      },
      {
        "expression": "/*Anime BD T8*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime BD T8')) : []",
        "score": 700
      },
      {
        "expression": "/*Anime Web T1*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T1')) : []",
        "score": 600
      },
      {
        "expression": "/*Anime Web T2*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T2')) : []",
        "score": 500
      },
      {
        "expression": "/*Anime Web T3*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T3')) : []",
        "score": 400
      },
      {
        "expression": "/*Anime Web T4*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T4')) : []",
        "score": 300
      },
      {
        "expression": "/*Anime Web T5*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T5')) : []",
        "score": 200
      },
      {
        "expression": "/*Anime Web T6*/ isAnime ? negate(seadex(streams), regexMatched(streams,'Anime Web T6')) : []",
        "score": 100
      },
      {
        "expression": "/*Repack*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(negate(regexMatched(streams, 'Repack2','Repack3') , streams), 'Repack/Proper') : []",
        "score": 5
      },
      {
        "expression": "/*Repack2*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(negate(regexMatched(streams, 'Repack3') , streams), 'Repack2') : []",
        "score": 6
      },
      {
        "expression": "/*Repack3*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams, 'Repack3') : []",
        "score": 7
      },
      {
        "expression": "/*v0*/ isAnime ? regexMatched(streams, 'v0') : []",
        "score": -51
      },
      {
        "expression": "/*v1*/ isAnime ? regexMatched(streams, 'v1') : []",
        "score": 1
      },
      {
        "expression": "/*v2*/ isAnime ? regexMatched(streams, 'v2') : []",
        "score": 2
      },
      {
        "expression": "/*v3*/ isAnime ? regexMatched(streams, 'v3') : []",
        "score": 3
      },
      {
        "expression": "/*v4*/ isAnime ? regexMatched(streams, 'v4') : []",
        "score": 4
      },
      {
        "expression": "/*#HDR*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR') : []",
        "score": 500
      },
      {
        "expression": "/*#DV*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'DV') : []",
        "score": 1000
      },
      {
        "expression": "/*#HDR10*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR10') : []",
        "score": 600
      },
      {
        "expression": "/*#HDR10+*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR10+') : []",
        "score": 601
      },
      {
        "expression": "/*#TrueHD*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'TrueHD') : []",
        "score": 2750
      },
      {
        "expression": "/*#ATMOS*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'Atmos') : []",
        "score": 3000
      },
      {
        "expression": "/*#DTS X*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS:X') : []",
        "score": 3250
      },
      {
        "expression": "/*#DTS-HD MA*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS-HD MA') : []",
        "score": 1250
      },
      {
        "expression": "/*#DTS-ES*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS-ES') : []",
        "score": 250
      },
      {
        "expression": "/*#DTS*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS') : []",
        "score": 1250
      },
      {
        "expression": "/*#DD+*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DD+') : []",
        "score": 1000
      },
      {
        "expression": "/*#DD*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DD') : []",
        "score": 750
      },
      {
        "expression": "/*#FLAC*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'FLAC') : []",
        "score": 2250
      },
      {
        "expression": "/*#AAC*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'AAC') : []",
        "score": 1000
      },
      {
        "expression": "/*#Opus*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'Opus') : []",
        "score": 250
      },
      {
        "expression": "/*IMAX*/ (queryType == 'movie') ? negate(regexMatched(streams, 'IMAX Enhanced'), regexMatched(streams, 'IMAX')) : []",
        "score": 800
      },
      {
        "expression": "/*IMAX Enhanced*/ (queryType == 'movie') ? regexMatched(streams, 'IMAX Enhanced') : []",
        "score": 800
      },
      {
        "expression": "/*Criterion Collection*/ (queryType == 'movie') ? regexMatched(streams, 'Criterion Collection') : []",
        "score": 25
      },
      {
        "expression": "/*Masters of Cinema*/ (queryType == 'movie') ? regexMatched(streams, 'Masters of Cinema') : []",
        "score": 25
      },
      {
        "expression": "/*Open Matte*/ (queryType == 'movie') ? regexMatched(streams, 'Open Matte') : []",
        "score": 25
      },
      {
        "expression": "/*Remaster*/ (queryType == 'movie') ? negate(regexMatched(streams, '4K'), regexMatched(streams, 'Remaster')) : []",
        "score": 25
      },
      {
        "expression": "/*4K Remaster*/ (queryType == 'movie') ? (regexMatched(regexMatched(negate(resolution(streams, '2160p'), streams), '4K'), regexMatched(streams, 'Remaster'))) : []",
        "score": 25
      },
      {
        "expression": "/*Hybrid*/ (queryType == 'movie') ? regexMatched(negate(releaseGroup(streams, 'HYBRID'), streams), 'Hybrid') : []",
        "score": 100
      },
      {
        "expression": "/*Special Edition*/ (queryType == 'movie') ? negate(regexMatched(streams, 'IMAX Edition', 'Open Matte', 'Theatrical Cut', 'Extended Clip'), regexMatched(streams, 'Special Edition')) : []",
        "score": 125
      },
      {
        "expression": "/*Theatrical Cut*/ (queryType == 'movie') ? regexMatched(streams, 'Theatrical Cut') : []",
        "score": 0,
        "enabled": false
      },
      {
        "expression": "/*Vinegar Syndrome*/ (queryType == 'movie') ? regexMatched(streams, 'Vinegar Syndrome') : []",
        "score": 25
      },
      {
        "expression": "/*Season Pack*/ (queryType == 'series' or queryType == 'anime.series') ? seasonPack(streams, 'seasonPack') : []",
        "score": 10
      },
      {
        "expression": "/*Anime LQ*/ isAnime ? regexMatched(streams, 'Anime LQ Groups') : []",
        "score": -10000
      },
      {
        "expression": "/*Anime Raws*/ isAnime ? regexMatched(streams, 'Anime Raws') : []",
        "score": -10000
      },
      {
        "expression": "/*#AV1*/ encode(streams, 'AV1')",
        "score": -10000
      },
      {
        "expression": "/*Extras*/ regexMatched(streams, 'Extras')",
        "score": -10000
      },
      {
        "expression": "/*VOSTFR*/ isAnime ? regexMatched(streams, 'VOSTFR') : []",
        "score": -10000
      },
      {
        "expression": "/*Generated HDR*/ regexMatched(streams, 'Generated Dynamic HDR')",
        "score": -10000
      },
      {
        "expression": "/*LQ*/ regexMatched(streams, 'LQ')",
        "score": -10000
      },
      {
        "expression": "/*LQ Title*/ regexMatched(streams, 'LQ (Release Title)')",
        "score": -10000
      },
      {
        "expression": "/*Sing-Along*/ regexMatched(streams, 'Sing-Along Versions')",
        "score": -10000
      },
      {
        "expression": "/*Upscaled*/ regexMatched(streams, 'Upscaled')",
        "score": -10000
      },
      {
        "expression": "/*B&W*/ (queryType == 'movie') ? regexMatched(streams, 'Black and White Editions') : []",
        "score": -10000
      },
      {
        "expression": "/*3D*/ regexMatched(streams, '3D')",
        "score": -10000
      },
      {
        "expression": "/*Bad Dual*/ regexMatched(streams, 'Bad Dual Groups')",
        "score": -10000
      },
      {
        "expression": "/*Dubs Only*/ isAnime ? regexMatched(streams, 'Dubs Only') : []",
        "score": -10000
      },
      {
        "expression": "/*BR-DISK*/ regexMatched(streams, 'BR-DISK')",
        "score": -10000
      },
      {
        "expression": "/*x265 (HD)*/ regexMatched(negate(resolution(streams, '2160p'), streams), 'x265 (HD)')",
        "score": -10000
      },
      {
        "expression": "/*Obfuscated*/ regexMatched(streams, 'Obfuscated')",
        "score": -1,
        "enabled": false
      },
      {
        "expression": "/*Retags*/ regexMatched(streams, 'Retags')",
        "score": -1
      },
      {
        "expression": "/*Anime Dual Audio*/ isAnime ? regexMatched(streams, 'Anime Dual Audio') : []",
        "score": 0,
        "enabled": false
      },
      {
        "expression": "/*Uncensored*/ isAnime ? regexMatched(streams, 'Uncensored') : []",
        "score": 0,
        "enabled": false
      },
      {
        "expression": "/*DV w/o HDR*/ (queryType == 'movie' or queryType == 'series') ? negate(merge(releaseGroup(streams, 'Flights'), regexMatched(streams, 'Hulu'), visualTag(streams, 'HDR','HDR10','HDR10+')), visualTag(streams, 'DV')) : []",
        "score": -10000,
        "enabled": false
      },
      {
        "expression": "/*10bit*/ isAnime ? regexMatched(streams, '10bit') : []",
        "score": -10000,
        "enabled": false
      }
    ]
  }
}
