{
  "metadata": {
    "id": "Vidhin05.advanced-template",
    "name": "Vidhin's Regexes - Advanced",
    "description": "Advanced sorting for Anime, Movies, and TV Shows using regex patterns from [TRaSH Guides](https://trash-guides.info). Features Ranked Stream Expressions with intelligent scoring for release groups, quality filtering, repack detection, audio tags, and visual quality. \n\n * Eliminates the need for audio/visual tags in your sort order \n * **ⓘ Requires Stream Expression Score in your sort order** (remove Regex Patterns and ranked regex scores) \n * Add `{stream.streamExpressionScore}` to formatter to display scores \n * Exceeds default expression limit - requires `MAX_STREAM_EXPRESSION_FILTERS=60+` \n * ⚠️ Change DV w/o HDR fallback score to -10000 if your devices don't fully support Dolby Vision Profile 5 \n * **Recommended for selfhosters or public instances with increased limits**",
    "source": "external",
    "author": "Vidhin05",
    "version": "0.1.0",
    "category": "Regex",
    "services": [],
    "serviceRequired": false
  },
  "config": {
    "preferredRegexPatterns": [],
    "syncedPreferredRegexUrls": [],
    "syncedRankedRegexUrls": [
      "https://raw.githubusercontent.com/Vidhin05/Releases-Regex/main/merged-anime-regexes.json"
    ],
    "rankedStreamExpressions": [
      {
        "expression": "/*Remux Tier 01*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T1') : []",
        "score": 1950
      },
      {
        "expression": "/*Remux Tier 02*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T2') : []",
        "score": 1900
      },
      {
        "expression": "/*Remux Tier 03*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Remux T3') : []",
        "score": 1850
      },
      {
        "expression": "/*HD Bluray Tier 01*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T1') : []",
        "score": 1800
      },
      {
        "expression": "/*HD Bluray Tier 02*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T2') : []",
        "score": 1750
      },
      {
        "expression": "/*HD Bluray Tier 03*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Bluray T3') : []",
        "score": 1700
      },
      {
        "expression": "/*WEB Tier 01*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T1') : []",
        "score": 1700
      },
      {
        "expression": "/*WEB Tier 02*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T2') : []",
        "score": 1650
      },
      {
        "expression": "/*WEB Tier 03*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web T3') : []",
        "score": 1600
      },
      {
        "expression": "/*Web Scene*/ (queryType == 'movie' or queryType == 'series') ? regexMatched(streams,'Web Scene') : []",
        "score": 1550
      },
      {
        "expression": "/*SeaDex Best*/ isAnime ? seadex(streams, 'best') : []",
        "score": 9000
      },
      {
        "expression": "/*SeaDex Alt*/ isAnime ? negate(seadex(streams, 'best'), seadex(streams)) : []",
        "score": 8000
      },
      {
        "expression": "/*Anime BD Tier 01*/ isAnime ? regexMatched(streams,'Anime BD T1') : []",
        "score": 1400
      },
      {
        "expression": "/*Anime BD Tier 02*/ isAnime ? regexMatched(streams,'Anime BD T2') : []",
        "score": 1300
      },
      {
        "expression": "/*Anime BD Tier 03*/ isAnime ? regexMatched(streams,'Anime BD T3') : []",
        "score": 1200
      },
      {
        "expression": "/*Anime BD Tier 04*/ isAnime ? regexMatched(streams,'Anime BD T4') : []",
        "score": 1100
      },
      {
        "expression": "/*Anime BD Tier 05*/ isAnime ? regexMatched(streams,'Anime BD T5') : []",
        "score": 1000
      },
      {
        "expression": "/*Anime BD Tier 06*/ isAnime ? regexMatched(streams,'Anime BD T6') : []",
        "score": 900
      },
      {
        "expression": "/*Anime BD Tier 07*/ isAnime ? regexMatched(streams,'Anime BD T7') : []",
        "score": 800
      },
      {
        "expression": "/*Anime BD Tier 08*/ isAnime ? regexMatched(streams,'Anime BD T8') : []",
        "score": 700
      },
      {
        "expression": "/*Anime Web Tier 01*/ isAnime ? regexMatched(streams,'Anime Web T1') : []",
        "score": 600
      },
      {
        "expression": "/*Anime Web Tier 02*/ isAnime ? regexMatched(streams,'Anime Web T2') : []",
        "score": 500
      },
      {
        "expression": "/*Anime Web Tier 03*/ isAnime ? regexMatched(streams,'Anime Web T3') : []",
        "score": 400
      },
      {
        "expression": "/*Anime Web Tier 04*/ isAnime ? regexMatched(streams,'Anime Web T4') : []",
        "score": 300
      },
      {
        "expression": "/*Anime Web Tier 05*/ isAnime ? regexMatched(streams,'Anime Web T5') : []",
        "score": 200
      },
      {
        "expression": "/*Anime Web Tier 06*/ isAnime ? regexMatched(streams,'Anime Web T6') : []",
        "score": 100
      },
      {
        "expression": "/*Remux Tier 01 (Anime)*/ isAnime ? regexMatched(streams,'Remux T1') : []",
        "score": 975
      },
      {
        "expression": "/*Remux Tier 02 (Anime)*/ isAnime ? regexMatched(streams,'Remux T2') : []",
        "score": 950
      },
      {
        "expression": "/*Remux Tier 03 (Anime)*/ isAnime ? regexMatched(streams,'Remux T3') : []",
        "score": 925
      },
      {
        "expression": "/*3D*/ regexMatched(streams, '3D')",
        "score": -10000
      },
      {
        "expression": "/*Anime LQ Groups*/ regexMatched(streams, 'Anime LQ Groups')",
        "score": -10000
      },
      {
        "expression": "/*Anime Raws*/ regexMatched(streams, 'Anime Raws')",
        "score": -10000
      },
      {
        "expression": "/*AV1*/ regexMatched(streams, 'AV1')",
        "score": -10000
      },
      {
        "expression": "/*Bad Dual Groups*/ regexMatched(streams, 'Bad Dual Groups')",
        "score": -10000
      },
      {
        "expression": "/*Dubs Only*/ regexMatched(streams, 'Dubs Only')",
        "score": -10000
      },
      {
        "expression": "/*Extras*/ regexMatched(streams, 'Extras')",
        "score": -10000
      },
      {
        "expression": "/*VOSTFR*/ regexMatched(streams, 'VOSTFR')",
        "score": -10000
      },
      {
        "expression": "/*Generated Dynamic HDR*/ regexMatched(streams, 'Generated Dynamic HDR')",
        "score": -10000
      },
      {
        "expression": "/*LQ*/ regexMatched(streams, 'LQ')",
        "score": -10000
      },
      {
        "expression": "/*LQ (Release Title)*/ regexMatched(streams, 'LQ (Release Title)')",
        "score": -10000
      },
      {
        "expression": "/*Sing-Along Versions*/ regexMatched(streams, 'Sing-Along Versions')",
        "score": -10000
      },
      {
        "expression": "/*Repack/Proper 1*/ regexMatched(negate(regexMatched(streams, 'Repack/Proper 2','Repack/Proper 3') , streams), 'Repack/Proper')",
        "score": 5
      },
      {
        "expression": "/*Repack/Proper 2*/ regexMatched(negate(regexMatched(streams, 'Repack/Proper 3') , streams), 'Repack/Proper 2')",
        "score": 6
      },
      {
        "expression": "/*Repack/Proper 3*/ regexMatched(streams, 'Repack/Proper 3')",
        "score": 7
      },
      {
        "expression": "/*HDR (only)*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR') : []",
        "score": 500
      },
      {
        "expression": "/*DV Boost*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'DV') : []",
        "score": 1000
      },
      {
        "expression": "/*HDR10*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR10') : []",
        "score": 600
      },
      {
        "expression": "/*HDR10+ Boost*/ (queryType == 'movie' or queryType == 'series') ? visualTag(streams, 'HDR10+') : []",
        "score": 601
      },
      {
        "expression": "/*TrueHD*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'TrueHD') : []",
        "score": 2750
      },
      {
        "expression": "/*ATMOS*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'Atmos') : []",
        "score": 3000
      },
      {
        "expression": "/*DTS X*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS:X') : []",
        "score": 3250
      },
      {
        "expression": "/*DTS-HD MA*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS-HD MA') : []",
        "score": 1250
      },
      {
        "expression": "/*DTS-ES*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS-ES') : []",
        "score": 250
      },
      {
        "expression": "/*DTS*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DTS') : []",
        "score": 1250
      },
      {
        "expression": "/*DDPlus*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DD+') : []",
        "score": 1000
      },
      {
        "expression": "/*DD*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'DD') : []",
        "score": 750
      },
      {
        "expression": "/*FLAC*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'FLAC') : []",
        "score": 2250
      },
      {
        "expression": "/*AAC*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'AAC') : []",
        "score": 1000
      },
      {
        "expression": "/*Opus*/ (queryType == 'movie' or queryType == 'series') ? audioTag(streams, 'Opus') : []",
        "score": 250
      },
      {
        "expression": "/*DV w/o HDR fallback*/ (queryType == 'movie' or queryType == 'series') ? negate(merge(releaseGroup(streams, 'Flights'), regexMatched(streams, 'Hulu'), visualTag(streams, 'HDR','HDR10','HDR10+')), visualTag(streams, 'DV')) : []",
        "score": 0
      }
    ]
  }
}
